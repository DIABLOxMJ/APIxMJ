# =====================================================================================================================
# APIxMJ - Files
# ---------------------------------------------------------------------------------------------------------------------
on load:
	set {_list::*} to mj_manager_skript_list()
	if {_list::*} contains "apixmj_manager.sk" and "apixmj.sk":
		send "[APIxMJ] Loading dc_event..." to console
	else:
		broadcast "[APIxMJ] Script loading cancel It requires (apixmj_manager.sk and apixmj.sk)"
		unload script file "apixmj_dc_event.sk"
	stop
# ---------------------------------------------------------------------------------------------------------------------
on skript stop:
	rename file "plugins/Skript/scripts/apixmj_dc_event.sk" to "-apixmj_dc_event.sk"
	send "[APIxMJ] Unloading dc_event.."
	stop
# ---------------------------------------------------------------------------------------------------------------------
# APIxMJ - Files
# =====================================================================================================================
# APIxMJ - Event 01
# ---------------------------------------------------------------------------------------------------------------------
on rightclick:
	set {_region} to mj_editfiles("diamond_city.data", "data.event_01.region")
	if "%region at player%" contains {_region}:
		if player's gamemode isn't creative:
			cancel event
			open workbench view to player
	stop
# ---------------------------------------------------------------------------------------------------------------------
on crafting of cake:
	set {_region} to mj_editfiles("diamond_city.data", "data.event_01.region")
	if "%region at player%" contains {_region}:
		mj_manager_message(player, "diamond_city", "data.prefix", "diamond_city", "data.event_01.eat")
	else:
		cancel event
		mj_manager_message(player, "diamond_city", "data.prefix", "diamond_city", "data.event_01.no_craft")
	stop
# ---------------------------------------------------------------------------------------------------------------------
on rightclick:
	if event-block is cake:
		set {_loc} to event-location
		wait 5 ticks
		set {_check} to block at {_loc}
		if type of {_check} is air:
			set {_id} to mj_core_id_checker("mystery_box.data", "data", "box_01")
			set {_item} to mj_manager_item_convert("mystery_box.data", "data.%{_id}%.key")
			if chance of 50%:
				give 1 of {_item} to player
				mj_manager_message(player, "diamond_city", "data.prefix", "diamond_city", "data.event_01.success")
	stop
# ---------------------------------------------------------------------------------------------------------------------
# APIxMJ - Event 01
# =====================================================================================================================